<view class="post-detail-container">

<!-- å›¾ç‰‡è½®æ’­ -->
<view wx:if="{{post.images && post.images.length && !isEditing}}">
  <swiper class="image-swiper" indicator-dots autoplay circular>
    <block wx:for="{{post.images}}" wx:key="index">
      <swiper-item>
        <image src="{{item}}" class="swiper-image" mode="aspectFill" />
        
      </swiper-item>
    </block>
  </swiper>
</view>
<view wx:else>
  <text>No Pictures</text>
</view>

<!-- å†…å®¹ï¼šæ ‡é¢˜ã€ä½ç½®ã€ç®€çŸ­æè¿° -->
<view class="post-body">
  <view class="post-left">
    <view class="post-title">
      <input wx:if="{{isEditing}}" value="{{editedTitle}}" bindinput="onTitleInput" class="editable-input" />
      <text wx:else>{{post.title}}</text>
    </view>
    <view class="post-description">
      <textarea
        user-select="true"
        wx:if="{{isEditing}}"
        value="{{editedDescription}}"
        bindinput="onDescriptionInput"
        class="editable-textarea"
        maxlength="-1"
      />
      <text user-select="true" wx:else>{{post.describe}}</text>
    </view>
    <view class="post-location">
      <input wx:if="{{isEditing}}" value="{{editedLocation}}" bindinput="onLocationInput" class="editable-input" />
      <text user-select="true" wx:else>ğŸ“{{post.location}}</text>
    </view>
  </view>
</view>

<!-- å›¾ç‰‡ä¸Šä¼ å’Œåˆ é™¤ -->
<view wx:if="{{isEditing}}">
  <!-- ä¸Šä¼ æŒ‰é’® -->
  <view class="image-upload-container">
    <button class="upload-btn" bindtap="handleImageUpload">â• ä¸Šä¼ æ–°å›¾ç‰‡</button>
  </view>

  <!-- æ¨ªå‘æ»šåŠ¨å›¾ç‰‡åˆ—è¡¨ -->
  <scroll-view class="image-scroll-row" scroll-x="true" enable-flex="true">
    <view class="image-row">
      <block wx:for="{{imageList}}" wx:key="index">
        <view class="image-item">
          <image src="{{item}}" mode="aspectFill" class="image-preview" />
          <view class="delete-img-btn" data-index="{{index}}" bindtap="handleImageDelete">âœ–ï¸</view>
        </view>
      </block>
    </view>
  </scroll-view>
</view>



<!-- ç‚¹èµåˆ†äº«æ”¶è— -->
<view class="like-location-container">
  <button class="like-btn" bindtap="handleLike" hover-class="none">â¤ï¸ {{post.likes}}</button>
  <view class="favorite-container">
    <button class="favorite-btn" bindtap="handleFavorite" hover-class="none">
      â­ {{favoritedCount || 0}}
    </button>
  </view>
  <view class="share-container">
    <button open-type="share" class="share-btn-real">ğŸ”„ Share</button>
  </view>
</view>

<!-- ç¼–è¾‘æ“ä½œæŒ‰é’® -->
<view class="action-buttons">
  <block wx:if="{{isEditing}}">
    <button class="save-btn" bindtap="handleSave">ğŸ’¾ Save</button>
    <button class="cancel-btn" bindtap="handleCancelEdit">ğŸš« Cancel
    </button>
  </block>
  <button wx:else class="update-btn" bindtap="handleUpdate">âœï¸ Edit</button>
  <button wx:if="{{!isEditing}}" class="delete-btn" data-postid="{{post._id}}" bindtap="handleDelete">âŒ Delete</button>

</view>

<!-- æ»‘åŠ¨æŸ¥çœ‹è®¡åˆ’ -->
<view class="slide-section">
  <text>ğŸ‘€ æ»‘åŠ¨æŸ¥çœ‹æ›´å¤šè®¡åˆ’ï¼ˆæ•¬è¯·æœŸå¾…ï¼‰</text>
</view>

<custom-tab-bar></custom-tab-bar>

</view>
